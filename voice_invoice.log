2025-08-15 12:32:53,792 - database - INFO - Created session: test123
2025-08-15 12:32:53,793 - main - INFO - Started session: test123
2025-08-15 12:35:02,190 - main - INFO - Started session: test123
2025-08-15 12:37:49,436 - main - INFO - Started session: test123
2025-08-15 12:38:23,318 - main - INFO - Started session: test123
2025-08-15 12:39:12,616 - main - INFO - Started session: test123
2025-08-15 12:39:40,125 - database - INFO - Created session: 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd
2025-08-15 12:39:40,126 - main - INFO - Started session: 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd
2025-08-15 12:40:02,232 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:40:02,242 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:40:03,327 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:40:03,347 - session_store - ERROR - Failed to parse JSON response for step client_info: Expecting value: line 1 column 1 (char 0)
2025-08-15 12:40:03,347 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:40:29,026 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:40:29,027 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:40:30,359 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:40:30,362 - session_store - ERROR - Failed to parse JSON response for step client_info: Expecting value: line 1 column 1 (char 0)
2025-08-15 12:40:30,362 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:41:15,966 - main - INFO - Started session: 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd
2025-08-15 12:41:34,516 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:41:34,526 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:41:35,492 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:41:35,513 - session_store - ERROR - Failed to parse JSON response for step client_info: Expecting value: line 1 column 1 (char 0)
2025-08-15 12:41:35,514 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:42:00,779 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:42:00,781 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:42:02,418 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:42:02,421 - session_store - ERROR - Failed to parse JSON response for step client_info: Expecting value: line 1 column 1 (char 0)
2025-08-15 12:42:02,421 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:44:52,996 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:44:53,005 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:44:53,809 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:44:53,833 - main - INFO - GPT response for step client_info: '```json\n{\n    "name": "Dave Smith",\n    "address": "47 Crescent Road, Benfleet, Essex"\n}\n```'
2025-08-15 12:44:53,834 - session_store - ERROR - Failed to parse JSON response for step client_info: Expecting value: line 1 column 1 (char 0)
2025-08-15 12:44:53,834 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:45:03,271 - main - INFO - Started session: 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd
2025-08-15 12:45:16,470 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:45:16,472 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:45:17,492 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:45:17,495 - main - INFO - GPT response for step client_info: '```json\n{\n    "name": "Dave Smith",\n    "address": "47 Crescent Road, Benfleet, Essex"\n}\n```'
2025-08-15 12:45:17,495 - session_store - ERROR - Failed to parse JSON response for step client_info: Expecting value: line 1 column 1 (char 0)
2025-08-15 12:45:17,496 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:46:34,040 - main - INFO - Started session: 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd
2025-08-15 12:46:52,428 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:46:52,439 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:46:53,540 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:46:53,551 - main - INFO - GPT response for step client_info: '```json\n{\n    "name": "Dave Smith",\n    "address": "47 Crescent Road, Benfleet, Essex"\n}\n```'
2025-08-15 12:46:53,551 - session_store - ERROR - Failed to parse JSON response for step client_info: Expecting value: line 1 column 1 (char 0)
2025-08-15 12:46:53,551 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:54:13,110 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:54:13,120 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step client_info
2025-08-15 12:54:14,071 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:54:14,083 - main - INFO - GPT response for step client_info: '{"name": "Dave Smith", "address": "47 Crescent Road, Benfleet, Essex"}'
2025-08-15 12:54:14,085 - session_store - INFO - Stored result for step client_info
2025-08-15 12:54:43,976 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:54:43,977 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step invoice_details
2025-08-15 12:54:44,901 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:54:44,905 - main - INFO - GPT response for step invoice_details: '{"type": "works_completed", "due_date": "2025-09-30"}'
2025-08-15 12:54:44,907 - session_store - ERROR - Error storing step result for invoice_details: Object of type date is not JSON serializable
2025-08-15 12:54:44,908 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:55:17,152 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:55:17,154 - main - INFO - Transcribed audio for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd, step invoice_details
2025-08-15 12:55:17,907 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:55:17,913 - main - INFO - GPT response for step invoice_details: '{"type": "works_completed", "due_date": "2025-11-01"}'
2025-08-15 12:55:17,914 - session_store - ERROR - Error storing step result for invoice_details: Object of type date is not JSON serializable
2025-08-15 12:55:17,915 - main - ERROR - Error processing step for session 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd: No constructor defined
2025-08-15 12:55:39,649 - session_store - INFO - Reset session: 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd
2025-08-15 12:55:39,650 - main - INFO - Reset session: 81f8ed33-a2a3-4edc-81c6-8ea02dcfb5dd
2025-08-15 12:55:40,980 - database - INFO - Created session: 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 12:55:40,982 - main - INFO - Started session: 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 12:55:56,849 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:55:56,850 - main - INFO - Transcribed audio for session 596341f0-0f5e-4a67-af6d-ab852ad36832, step client_info
2025-08-15 12:55:57,397 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:55:57,400 - main - INFO - GPT response for step client_info: '{"name": "Mark Smith", "address": "47 Crescent Road, Benfleet, Essex"}'
2025-08-15 12:55:57,403 - session_store - INFO - Stored result for step client_info
2025-08-15 12:56:17,259 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 12:56:17,261 - main - INFO - Transcribed audio for session 596341f0-0f5e-4a67-af6d-ab852ad36832, step invoice_details
2025-08-15 12:56:18,047 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 12:56:18,054 - main - INFO - GPT response for step invoice_details: '{"type": "works_completed", "due_date": "2025-11-01"}'
2025-08-15 12:56:18,056 - session_store - ERROR - Error storing step result for invoice_details: Object of type date is not JSON serializable
2025-08-15 12:56:18,056 - main - ERROR - Error processing step for session 596341f0-0f5e-4a67-af6d-ab852ad36832: No constructor defined
2025-08-15 13:02:44,646 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:02:44,657 - main - INFO - Transcribed audio for session 596341f0-0f5e-4a67-af6d-ab852ad36832, step invoice_details
2025-08-15 13:02:45,463 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:02:45,481 - main - INFO - GPT response for step invoice_details: '{"type": "deposit", "due_date": "2025-11-01"}'
2025-08-15 13:02:45,486 - session_store - INFO - Stored result for step invoice_details
2025-08-15 13:03:21,709 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:03:21,712 - main - INFO - Transcribed audio for session 596341f0-0f5e-4a67-af6d-ab852ad36832, step item_1
2025-08-15 13:03:22,848 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:03:22,863 - main - INFO - GPT response for step item_1: '{"description": "general plumbing works", "value": 0.0, "vat_rate": 20.0, "cis_rate": 0.0, "retention_rate": 0.0, "discount_rate": 0.0}'
2025-08-15 13:03:22,863 - session_store - ERROR - Error storing step result for item_1: No constructor defined
2025-08-15 13:03:22,863 - main - ERROR - Error processing step for session 596341f0-0f5e-4a67-af6d-ab852ad36832: No constructor defined
2025-08-15 13:03:57,556 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:03:57,558 - main - INFO - Transcribed audio for session 596341f0-0f5e-4a67-af6d-ab852ad36832, step item_1
2025-08-15 13:03:58,931 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:03:58,951 - main - INFO - GPT response for step item_1: '{"description": "plumbing works", "value": 0.0, "vat_rate": 20.0, "cis_rate": 20.0, "retention_rate": 0.0, "discount_rate": 0.0}'
2025-08-15 13:03:58,951 - session_store - ERROR - Error storing step result for item_1: No constructor defined
2025-08-15 13:03:58,951 - main - ERROR - Error processing step for session 596341f0-0f5e-4a67-af6d-ab852ad36832: No constructor defined
2025-08-15 13:05:06,758 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:05:06,760 - main - INFO - Transcribed audio for session 596341f0-0f5e-4a67-af6d-ab852ad36832, step item_1
2025-08-15 13:05:08,678 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:05:08,682 - main - INFO - GPT response for step item_1: '{"description": "Electrical Works", "value": 550.0, "vat_rate": 20.0, "cis_rate": 20.0, "retention_rate": 0.0, "discount_rate": 0.0}'
2025-08-15 13:05:08,683 - session_store - INFO - Added item 1: Electrical Works
2025-08-15 13:05:08,686 - session_store - INFO - Stored result for step item_1
2025-08-15 13:21:32,994 - session_store - INFO - Built invoice data for session 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 13:21:32,994 - pdf_generator - ERROR - Error generating PDF: 'Invoice' object has no attribute 'invoice_number'
2025-08-15 13:21:32,994 - main - ERROR - Error generating PDF for session 596341f0-0f5e-4a67-af6d-ab852ad36832: 'Invoice' object has no attribute 'invoice_number'
2025-08-15 13:21:40,898 - session_store - INFO - Built invoice data for session 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 13:21:40,898 - pdf_generator - ERROR - Error generating PDF: 'Invoice' object has no attribute 'invoice_number'
2025-08-15 13:21:40,898 - main - ERROR - Error generating PDF for session 596341f0-0f5e-4a67-af6d-ab852ad36832: 'Invoice' object has no attribute 'invoice_number'
2025-08-15 13:21:53,346 - session_store - INFO - Built invoice data for session 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 13:21:53,347 - pdf_generator - ERROR - Error generating PDF: 'Invoice' object has no attribute 'invoice_number'
2025-08-15 13:21:53,347 - main - ERROR - Error generating PDF for session 596341f0-0f5e-4a67-af6d-ab852ad36832: 'Invoice' object has no attribute 'invoice_number'
2025-08-15 13:26:02,445 - session_store - INFO - Built invoice data for session 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 13:26:02,455 - pdf_generator - INFO - Generated PDF invoice: generated_invoices/invoice_INV-596341F0_20250815_132602.pdf
2025-08-15 13:26:02,455 - main - INFO - Generated PDF for session 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 13:40:45,548 - session_store - INFO - Reset session: 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 13:40:45,549 - main - INFO - Reset session: 596341f0-0f5e-4a67-af6d-ab852ad36832
2025-08-15 13:40:47,037 - database - INFO - Created session: 97004fd4-1078-4af3-857f-0ae595a6b344
2025-08-15 13:40:47,039 - main - INFO - Started session: 97004fd4-1078-4af3-857f-0ae595a6b344
2025-08-15 13:41:07,302 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:41:07,310 - main - INFO - Transcribed audio for session 97004fd4-1078-4af3-857f-0ae595a6b344, step client_info
2025-08-15 13:41:08,324 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:41:08,341 - main - INFO - GPT response for step client_info: '{"name": "Dave Smith", "address": "47 Crescent Road, Benfleet, Essex SS71JL"}'
2025-08-15 13:41:08,343 - session_store - INFO - Stored result for step client_info
2025-08-15 13:41:30,714 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:41:30,716 - main - INFO - Transcribed audio for session 97004fd4-1078-4af3-857f-0ae595a6b344, step invoice_details
2025-08-15 13:41:31,427 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:41:31,438 - main - INFO - GPT response for step invoice_details: '{"type": "works_completed", "due_date": "2025-11-12"}'
2025-08-15 13:41:31,441 - session_store - INFO - Stored result for step invoice_details
2025-08-15 13:41:54,091 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:41:54,094 - main - INFO - Transcribed audio for session 97004fd4-1078-4af3-857f-0ae595a6b344, step item_1
2025-08-15 13:41:56,402 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:41:56,405 - main - INFO - GPT response for step item_1: '{"description": "plasterboard", "value": 100.0, "vat_rate": 20.0, "cis_rate": 0.0, "retention_rate": 0.0, "discount_rate": 0.0}'
2025-08-15 13:41:56,405 - session_store - INFO - Added item 1: plasterboard
2025-08-15 13:41:56,409 - session_store - INFO - Stored result for step item_1
2025-08-15 13:42:24,968 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 13:42:24,970 - main - INFO - Transcribed audio for session 97004fd4-1078-4af3-857f-0ae595a6b344, step item_2
2025-08-15 13:42:26,449 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 13:42:26,452 - main - INFO - GPT response for step item_2: '{"description": "electrical fittings", "value": 500.0, "vat_rate": 20.0, "cis_rate": 0.0, "retention_rate": 0.0, "discount_rate": 5.0}'
2025-08-15 13:42:26,453 - session_store - INFO - Added item 2: electrical fittings
2025-08-15 13:42:26,457 - session_store - INFO - Stored result for step item_2
2025-08-15 13:42:37,782 - session_store - INFO - Built invoice data for session 97004fd4-1078-4af3-857f-0ae595a6b344
2025-08-15 13:42:37,787 - pdf_generator - INFO - Generated PDF invoice: generated_invoices/invoice_INV-97004FD4_20250815_134237.pdf
2025-08-15 13:42:37,787 - main - INFO - Generated PDF for session 97004fd4-1078-4af3-857f-0ae595a6b344
